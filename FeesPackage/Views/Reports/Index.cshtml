@using FeesPackage.Models;
@model ClientInfoModel

<style>
    .btn-enabled {
        cursor: default;
        pointer-events: auto;
        background-color: lightgreen;
    }
    .btn-disabled {
        cursor: not-allowed;
        pointer-events: none;
        background-color: #ededed;
    }
</style>

<div class="span9">
    <div class="content">
        <div class="btn-controls">
            <div class="btn-box-row row-fluid">
                <div class="span9">
                    <div class="row-fluid">
                        <div class="span12">
                            <a onclick="ReferralEscrowDetail()" class="btn-box small span4">
                                <i class="fas fa-file-alt"></i><b>Referral Escrow Detail</b>
                            </a><a onclick="ReferralEscrowSummary()" class="btn-box small span4">
                                <i class="fas fa-file-alt"></i><b>Referral Escrow Summary</b>
                            </a><a onclick="ReferralStatement()" class="btn-box small span4">
                                <i class="fas fa-file-alt"></i><b>Referral Report</b>
                            </a>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            <a onclick="MonthlyIncome()" class="btn-box small span4">
                                <i class="fas fa-file-alt"></i><b>Monthly Income Report</b>
                            </a><a onclick="MonthlyIncomeDetail()" class="btn-box small span4">
                                <i class="fas fa-file-alt"></i><b>Monthly Income Detail</b>
                            </a>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            <a onclick="ClaimsWithNoPayments()" class="btn-box small span4">
                                <i class="fas fa-file-alt"></i><b>Claims w/ No Payments</b>
                            </a><a onclick="ClaimsWithNoPaymentsOver30Days()" class="btn-box small span4">
                                <i class="fas fa-file-alt"></i><b>Claims w/ No Payments Over 30 Days</b>
                            </a><a onclick="ClaimsDormant()" class="btn-box small span4">
                                <i class="fas fa-file-alt"></i><b>Dormant Claims Report</b>
                            </a>
                        </div>
                    </div>
                    <div class="row-fluid">
                        <div class="span12">
                            <a onclick="PostedDeposits()" class="btn-box small span4">
                                <i class="fas fa-file-alt"></i><b>Print Range Posted Deposits</b>
                            </a><a onclick="RefAttyFeesByFP()" class="btn-box small span4">
                                <i class="fas fa-file-alt"></i><b>Ref Atty Fees by FP</b>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--/#btn-controls-->
    </div>
    <!--/.content-->
</div>
<!--/.span9-->

<div id="ToFromDlg" style="display:none">
    <p>Begin date: <input type="text" id="fromDate" /></p>
    <p>End date: <input type="text" id="toDate" /></p>
</div>

<div id="AttyClientDlg" style="display:none">
    <p>Attorney:</p>
    <p>
        @Html.DropDownList("Attorneys", new SelectList(Model.Attys, "Id", "Name"), "Select Attorney", new { @class = "form-control", id = "atty" })
    </p>
    <p>Client:</p>
    <p>
        @Html.DropDownList("Clients", new SelectList(Model.Clients, "Client_Name", "Client_Name"), "Select Client", new { @class = "form-control", id = "client" })
    </p>
</div>

<script>
    function ReferralEscrowDetail() {
        $('#ToFromDlg').dialog({
            buttons: [{
                text: "Run",
                "id": "run",
                click: function () {
                    window.open('/Reports/ReferralEscrowDetail?fromDate=' + $('#fromDate').val() + '&toDate=' + $('#toDate').val());
                    $('#ToFromDlg').dialog('close')
                }
            }],
            open: function () {
                $('#fromDate').datepicker({ title: 'From Date' }).blur();
                $('#toDate').datepicker({ title: 'To Date' }).blur();
                if ($('#toDate').val() == '')
                    $('#toDate').val('@DateTime.Today.ToString("MM/dd/yyyy")');
            },
            close: function () {
                $('#fromDate').datepicker('destroy');
                $('#toDate').datepicker('destroy');
            },
        });
    }
    function ReferralEscrowSummary() {
        $('#ToFromDlg').dialog({
            buttons: [{
                text: "Run",
                "id": "run",
                click: function () {
                    window.open('/Reports/ReferralEscrowSummary?fromDate=' + $('#fromDate').val() + '&toDate=' + $('#toDate').val());
                    $('#ToFromDlg').dialog('close')
                }
            }],
            open: function () {
                $('#fromDate').datepicker({ title: 'From Date' }).blur();
                $('#toDate').datepicker({ title: 'To Date' }).blur();
                if ($('#toDate').val() == '')
                    $('#toDate').val('@DateTime.Today.ToString("MM/dd/yyyy")');
            },
            close: function () {
                $('#fromDate').datepicker('destroy');
                $('#toDate').datepicker('destroy');
            },
        });
    }
    function ReferralStatement() {
        $('#ToFromDlg').dialog({
            buttons: [{
                text: "Run",
                "id": "run",
                click: function () {
                    window.open('/Reports/ReferralStatement?fromDate=' + $('#fromDate').val() + '&toDate=' + $('#toDate').val());
                    $('#ToFromDlg').dialog('close')
                }
            }],
            open: function () {
                $('#fromDate').datepicker({ title: 'From Date' }).blur();
                $('#toDate').datepicker({ title: 'To Date' }).blur();
                if ($('#toDate').val() == '')
                    $('#toDate').val('@DateTime.Today.ToString("MM/dd/yyyy")');
            },
            close: function () {
                $('#fromDate').datepicker('destroy');
                $('#toDate').datepicker('destroy');
            },
        });
    }
    function MonthlyIncome() {
        $('#ToFromDlg').dialog({
            buttons: [{
                text: "Run",
                "id": "run",
                click: function () {
                    window.open('/Reports/MonthlyIncome?fromDate=' + $('#fromDate').val() + '&toDate=' + $('#toDate').val());
                    $('#ToFromDlg').dialog('close')
                }
            }],
            open: function () {
                $('#fromDate').datepicker({ title: 'From Date' }).blur();
                $('#toDate').datepicker({ title: 'To Date' }).blur();
                if ($('#toDate').val() == '')
                    $('#toDate').val('@DateTime.Today.ToString("MM/dd/yyyy")');
            },
            close: function () {
                $('#fromDate').datepicker('destroy');
                $('#toDate').datepicker('destroy');
            },
        });
    }
    function MonthlyIncomeDetail() {
        $('#ToFromDlg').dialog({
            buttons: [{
                text: "Run",
                "id": "run",
                click: function () {
                    window.open('/Reports/MonthlyIncomeDetail?fromDate=' + $('#fromDate').val() + '&toDate=' + $('#toDate').val());
                    $('#ToFromDlg').dialog('close')
                }
            }],
            open: function () {
                $('#fromDate').datepicker({ title: 'From Date' }).blur();
                $('#toDate').datepicker({ title: 'To Date' }).blur();
                if ($('#toDate').val() == '')
                    $('#toDate').val('@DateTime.Today.ToString("MM/dd/yyyy")');
            },
            close: function () {
                $('#fromDate').datepicker('destroy');
                $('#toDate').datepicker('destroy');
            },
        });
    }
    function ClaimsWithNoPayments() {
        window.open('/Reports/ClaimsWithNoPayments');
    }
    function ClaimsWithNoPaymentsOver30Days() {
        window.open('/Reports/ClaimsWithNoPaymentsOver30Days');
    }
    function ClaimsDormant() {
        window.open('/Reports/ClaimsDormant');
    }
    function PostedDeposits() {
        $('#ToFromDlg').dialog({
            buttons: [{
                text: "Run",
                "id": "run",
                click: function () {
                    window.open('/Reports/PostedDeposits?fromDate=' + $('#fromDate').val() + '&toDate=' + $('#toDate').val());
                    $('#ToFromDlg').dialog('close')
                }
            }],
            open: function () {
                $('#fromDate').datepicker({ title: 'From Date' }).blur();
                $('#toDate').datepicker({ title: 'To Date' }).blur();
                if ($('#toDate').val() == '')
                    $('#toDate').val('@DateTime.Today.ToString("MM/dd/yyyy")');
            },
            close: function () {
                $('#fromDate').datepicker('destroy');
                $('#toDate').datepicker('destroy');
            },
        });
    }
    function RefAttyFeesByFP() {
        $('#AttyClientDlg').dialog({
            buttons: [{
                text: "Run",
                "id": "run",
                click: function () {
                    window.open('/Reports/RefAttyFeesByFP?atty=' + $('#atty').val() + '&client=' + $('#client').val());
                    $('#AttyClientDlg').dialog('close')
                }
            }],
            open: function () {
                setRunBtn();

                $('#atty').change(function () {
                    setRunBtn();
                })

                $('#client').change(function () {
                    setRunBtn();
                })
            },
            close: function () {
            },
        });
    }
    function setRunBtn() {
        if ($('#atty option:selected').val() == '' && $('#client option:selected').val() == '') {
            $('#run').prop('disabled', true);
            $('#run').removeClass('btn-enabled');
            $('#run').addClass('btn-disabled');
        }
        else {
            $('#run').prop('disabled', false);
            $('#run').removeClass('btn-disabled');
            $('#run').addClass('btn-enabled');
        }
    }
</script>
